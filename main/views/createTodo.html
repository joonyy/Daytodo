<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendar</title>
  <style>
    /* 선택된 달의 달력 스타일 */
    .calendar {
      margin-top: 20px;
      text-align: center;
    }
    .calendar-header {
      display: flex;
      justify-content: center; /* 가운데 정렬 */
      align-items: center;
      margin-bottom: 10px;
    }
    .prev-month,
    .next-month {
      border: none;
      background: none;
      cursor: pointer;
      font-size: 1.2em; /* 아이콘 크기 */
      margin: 0 10px; /* 좌우 여백 추가 */
    }
    .calendar-grid {
      border-collapse: collapse;
      width: 100%;
    }
    .calendar-grid th,
    .calendar-grid td {
      padding: 10px;
    }
    .calendar-grid th {
      background-color: #f0f0f0; /* 헤더 배경색 */
    }
    .calendar-grid th,
    .calendar-grid td {
      border: 1px solid #ddd; /* 테두리 추가 */
    }
    .calendar-grid .today {
      background-color: #ffc; /* 오늘 날짜 배경색 */
    }

    /* 진행률 바 스타일 */
    .progress-bar {
      background-color: #f0f0f0;
      height: 20px;
      margin-top: 10px;
      width: 100%;
    }
    .progress {
      background-color: green;
      height: 100%;
      width: 70%; /* 초기값은 50%로 설정 */
    }
  </style>
</head>
<body>
  <!-- 진행률 바 -->
  <div class="progress-bar">
    <div class="progress"></div>
  </div>

  <!-- 선택된 달의 달력 표시 -->
  <div class="calendar">
    <div class="calendar-header">
      <button class="prev-month">&lt;</button>
      <h2 class="month-year"></h2>
      <button class="next-month">&gt;</button>
    </div>
    <table class="calendar-grid">
      <thead>
        <tr>
          <th>일</th>
          <th>월</th>
          <th>화</th>
          <th>수</th>
          <th>목</th>
          <th>금</th>
          <th>토</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    // 달력 컴포넌트를 초기화하는 함수
    function initCalendar() {
      const calendar = document.querySelector('.calendar');
      const header = calendar.querySelector('.calendar-header');
      const grid = calendar.querySelector('.calendar-grid');
      const monthYear = header.querySelector('.month-year');
      const prevBtn = header.querySelector('.prev-month');
      const nextBtn = header.querySelector('.next-month');

      let currentDate = new Date(); // 현재 날짜 가져오기
      let currentMonth = currentDate.getMonth();
      let currentYear = currentDate.getFullYear();

      // 달력 헤더에 현재 연도와 월 표시
      function updateHeader() {
        const options = { month: 'long', year: 'numeric' };
        monthYear.textContent = currentDate.toLocaleDateString('en-US', options);
      }

      // 이전 달로 이동
      prevBtn.addEventListener('click', () => {
        currentMonth--;
        if (currentMonth < 0) {
          currentMonth = 11;
          currentYear--;
        }
        currentDate = new Date(currentYear, currentMonth);
        renderCalendar();
      });

      // 다음 달로 이동
      nextBtn.addEventListener('click', () => {
        currentMonth++;
        if (currentMonth > 11) {
          currentMonth = 0;
          currentYear++;
        }
        currentDate = new Date(currentYear, currentMonth);
        renderCalendar();
      });

      // 달력 그리기
      function renderCalendar() {
        updateHeader();

        // 이전에 그려진 날짜 삭제
        grid.innerHTML = '';

        const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();

        // 해당 달의 첫 번째 날의 요일 가져오기
        const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();

        // 날짜 추가
        let dayIndex = 1;
        let weeksRendered = 0;
        for (let i = 0; i < 6; i++) { // 최대 6주까지 표시
          const weekRow = document.createElement('tr');
          let rendered = false; // 날짜를 하나 이상 렌더링했는지 여부
          for (let j = 0; j < 7; j++) {
            const day = document.createElement('td');
            if (i === 0 && j < firstDayOfMonth) {
              // 이번 달 시작일 이전의 빈 칸
              weekRow.appendChild(day);
            } else if (dayIndex <= daysInMonth) {
              // 이번 달 날짜 표시
              day.textContent = dayIndex;
              dayIndex++;
              weekRow.appendChild(day);
              rendered = true;
            } else {
              // 다음 달 시작일 이후의 빈 칸
              weekRow.appendChild(day);
            }
            day.classList.add('calendar-day');
            if (currentDate.getMonth() === new Date().getMonth() && day.textContent == new Date().getDate()) {
              day.classList.add('today'); // 오늘 날짜는 강조
            }
          }
          if (rendered) {
            grid.appendChild(weekRow);
            weeksRendered++;
          }
        }

        // 마지막 줄이 모두 빈 칸이라면 삭제
        if (weeksRendered === 0) {
          grid.innerHTML = '';
        }
      }

      // 초기화
      renderCalendar();
    }

    // 페이지 로드 시 달력 컴포넌트 초기화
    window.addEventListener('DOMContentLoaded', () => {
      initCalendar();
    });
  </script>
</body>
</html>
